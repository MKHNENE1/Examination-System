<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quiz</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="./css/bootstrap.css" />

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />

    <!-- Custom Style -->
    <link rel="stylesheet" href="./css/exam.css" />

    <!-- animation -->
    <link rel="stylesheet" href="./css/exam-animation.css" />

    <!-- Responsive -->
    <link rel="stylesheet" href="./css/exam-responsive.css" />

    <!-- result CSS -->
    <link rel="stylesheet" href="./css/result.css" />
  </head>
  <body>
    <main class="overflow-hidden">
      <div class="container">
        <!-- Steps Start -->
        <section class="steps">
          <form
            novalidate
            onsubmit="return false"
            class="show-section"
            id="stepForm"
          >
            <!-- Step 1 -->
            <fieldset id="step1">
              <!-- Question -->
              <h1 class="question">
                The islands With Coral Covered Surfaces in Bay of Bengal are
              </h1>

              <!-- Options -->
              <div class="options d-flex flex-wrap justify-content-between">
                <div class="option animate">
                  <input type="radio" name="op1" value="Andaman islands" />
                  <label>Andaman islands</label>
                </div>
                <div class="option animate delay-100">
                  <input type="radio" name="op1" value="Nicobar islands" />
                  <label>Nicobar islands</label>
                </div>
                <div class="option animate delay-200">
                  <input type="radio" name="op1" value="Both (a) and (B)" />
                  <label>Both (a) and (B)</label>
                </div>
                <div class="option animate delay-300">
                  <input type="radio" name="op1" value="Andaman islands" />
                  <label>Andaman islands</label>
                </div>
              </div>

              <!-- Next Prev Button -->
              <div class="nextPrev">
                <button class="prev" type="button">
                  <i class="fa-solid fa-caret-left"></i>
                </button>

                <!-- COunter -->
                <div class="stepCount"><span>1</span>/4</div>
                <button class="next" type="button" id="step1btn">
                  <i class="fa-solid fa-caret-right"></i>
                </button>
              </div>
            </fieldset>

            <!-- Step 2 -->
            <fieldset id="step2">
              <!-- Question -->
              <h1 class="question">
                What artist has the most streams on Spotify?
              </h1>

              <!-- Options -->
              <div class="options d-flex flex-wrap justify-content-between">
                <div class="option animate">
                  <input type="radio" name="op2" value="Andaman islands" />
                  <label>Andaman islands</label>
                </div>
                <div class="option animate delay-100">
                  <input type="radio" name="op2" value="Nicobar islands" />
                  <label>Nicobar islands</label>
                </div>
                <div class="option animate delay-200">
                  <input type="radio" name="op2" value="Both (a) and (B)" />
                  <label>Both (a) and (B)</label>
                </div>
                <div class="option animate delay-300">
                  <input type="radio" name="op2" value="Andaman islands" />
                  <label>Andaman islands</label>
                </div>
              </div>

              <!-- Next Prev Button -->
              <div class="nextPrev">
                <button class="prev" type="button">
                  <i class="fa-solid fa-caret-left"></i>
                </button>

                <!-- COunter -->
                <div class="stepCount"><span>2</span>/4</div>
                <button class="next" type="button" id="step2btn">
                  <i class="fa-solid fa-caret-right"></i>
                </button>
              </div>
            </fieldset>

            <!-- Step 3 -->
            <fieldset id="step3">
              <!-- Question -->
              <h1 class="question">
                What is the most common surname in the United States?
              </h1>

              <!-- Options -->
              <div class="options d-flex flex-wrap justify-content-between">
                <div class="option animate">
                  <input type="radio" name="op3" value="Andaman islands" />
                  <label>Andaman islands</label>
                </div>
                <div class="option animate delay-100">
                  <input type="radio" name="op3" value="Nicobar islands" />
                  <label>Nicobar islands</label>
                </div>
                <div class="option animate delay-200">
                  <input type="radio" name="op3" value="Both (a) and (B)" />
                  <label>Both (a) and (B)</label>
                </div>
                <div class="option animate delay-300">
                  <input type="radio" name="op3" value="Andaman islands" />
                  <label>Andaman islands</label>
                </div>
              </div>

              <!-- Next Prev Button -->
              <div class="nextPrev">
                <button class="prev" type="button">
                  <i class="fa-solid fa-caret-left"></i>
                </button>

                <!-- COunter -->
                <div class="stepCount"><span>3</span>/4</div>
                <button class="next" type="button" id="step3btn">
                  <i class="fa-solid fa-caret-right"></i>
                </button>
              </div>
            </fieldset>

            <!-- Step 4 -->
            <fieldset id="step4">
              <!-- Question -->
              <h1 class="question">
                Where would you be if you were standing on the Spanish Steps?
              </h1>

              <!-- Options -->
              <div class="options d-flex flex-wrap justify-content-between">
                <div class="option animate">
                  <input type="radio" name="op4" value="Andaman islands" />
                  <label>Andaman islands</label>
                </div>
                <div class="option animate delay-100">
                  <input type="radio" name="op4" value="Nicobar islands" />
                  <label>Nicobar islands</label>
                </div>
                <div class="option animate delay-200">
                  <input type="radio" name="op4" value="Both (a) and (B)" />
                  <label>Both (a) and (B)</label>
                </div>
                <div class="option animate delay-300">
                  <input type="radio" name="op4" value="Andaman islands" />
                  <label>Andaman islands</label>
                </div>
              </div>

              <!-- Next Prev Button -->
              <div class="nextPrev">
                <button class="prev" type="button">
                  <i class="fa-solid fa-caret-left"></i>
                </button>

                <!-- COunter -->
                <div class="stepCount"><span>4</span>/4</div>
                <button class="apply" type="button" id="sub">
                  <i class="fa-solid fa-caret-right"></i>
                </button>
              </div>
            </fieldset>
          </form>

          <img class="avatar" src="./assets/avatar.png" alt="Avatar" />
          <div class="backgroundSlab"></div>
        </section>
      </div>
    </main>

    <!-- result -->
    <div class="loadingresult">
      <img src="./assets/loading.gif" alt="loading" />
    </div>
    <div class="result_page">
      <div class="container">
        <div class="result_inner">
          <!-- header -->
          <header class="resultheader">
            Your Result is there
            <div class="h-border"></div>
          </header>

          <div class="result_content">
            <div class="result_msg">
              <img src="./assets/check.png" alt="check" />
              Wow! You are Brilliant!
            </div>
            <span>your overall score</span>
            <div class="u_prcnt">70%</div>
            <div class="prcnt_bar">
              <div class="fill"></div>
            </div>
            <div class="prcnt_bar_lvl">Medium</div>
            <div class="lvl_overview">
              <div class="lvl-single">
                <div class="lvl-color low"></div>
                <div class="lvl-name">Low</div>
                <div class="lvl-line"></div>
              </div>
              <div class="lvl-single">
                <div class="lvl-color medium"></div>
                <div class="lvl-name">Medium</div>
                <div class="lvl-line"></div>
              </div>
              <div class="lvl-single">
                <div class="lvl-color high"></div>
                <div class="lvl-name">High</div>
              </div>
            </div>
          </div>

          <footer class="resultfooter"></footer>
        </div>
      </div>
    </div>

    <div id="error"></div>

    <!-- jQuery -->
    <script src="./js/jquery-3.7.1.js"></script>
    <!-- Bootstrap JS -->
    <script src="./js/bootstrap.min.js"></script>

    <!-- Result JS -->
    <script>
      function showresult() {
        $(".loadingresult").css("display", "grid");

        setTimeout(function () {
          $(".result_page").addClass("result_page_show");
        }, 1000);
      }

      //correct answers
      var correct_answers = ["horse", "Lion", "horse", "Lion", "horse"];

      // user answers
      let correct = 0;

      var steps = $("fieldset").length;

      // console.log(steps);
      function countresult(resultnumber) {
        $("#step" + resultnumber + " input").each(function () {
          for (var i = 0; i <= correct_answers.length; i++) {
            if ($(this).is(":checked")) {
              if ($(this).val() == correct_answers[i]) {
                correct++;

                break;
              }
            }
          }
        });

        var correctprcnt = (correct / steps) * 100;

        $(".u_prcnt").html(correctprcnt + "%");
        $(".prcnt_bar .fill").css("width", correctprcnt + "%");
        if (correctprcnt < 50) {
          $(".prcnt_bar_lvl").html("low");
          $(".u_prcnt, .prcnt_bar_lvl, .result_msg").css(
            "color",
            "rgb(229, 0, 26)"
          );
          $(".prcnt_bar .fill").css("background-color", "rgb(229, 0, 26)");
          $(".result_msg").html(
            '<img src="./assets/cross.png" alt="cross"> You Failed!'
          );
        } else if (correctprcnt < 80) {
          $(".prcnt_bar_lvl").html("Medium");
          $(".u_prcnt, .prcnt_bar_lvl, .result_msg").css(
            "color",
            "rgb(255, 89, 0)"
          );
          $(".prcnt_bar .fill").css("background-color", "rgb(255, 89, 0)");
          $(".result_msg").html(
            '<img src="assets/images/warning.png" alt="warning"> Could have done better!'
          );
        } else if (correctprcnt >= 80) {
          $(".prcnt_bar_lvl").html("High");
          $(".u_prcnt, .prcnt_bar_lvl, .result_msg").css(
            "color",
            "rgb(60, 196, 52)"
          );
          $(".prcnt_bar .fill").css("background-color", "rgb(60, 196, 52)");
          $(".result_msg").html(
            '<img src="assets/images/check.png" alt="check"> Wow! You are Brilliant!'
          );
        }
      }
    </script>
    <!-- Custom JS -->
    <script>
      // next prev
      var divs = $(".show-section fieldset");
      var now = 0; // currently shown div
      divs.hide().first().show(); // hide all divs except first

      function next() {
        divs.eq(now).hide();
        now = now + 1 < divs.length ? now + 1 : 0;
        divs.eq(now).show(); // show next
        console.log(now);
      }
      $(".prev").on("click", function () {
        divs.eq(now).hide();
        now = now > 0 ? now - 1 : divs.length - 1;
        divs.eq(now).show(); // show previous
        console.log(now);

        $(".option").addClass("animate");
        $(".option").removeClass("animateReverse");
      });

      // quiz validation
      var checkedradio = false;

      function radiovalidate(stepnumber) {
        var checkradio = $("#step" + stepnumber + " input")
          .map(function () {
            if ($(this).is(":checked")) {
              return true;
            } else {
              return false;
            }
          })
          .get();

        checkedradio = checkradio.some(Boolean);
      }

      $(document).ready(function () {
        // check step1
        $("#step1btn").on("click", function () {
          radiovalidate(1);

          if (checkedradio == false) {
            (function (el) {
              setTimeout(function () {
                el.children().remove(".reveal");
              }, 3000);
            })(
              $("#error").append(
                '<div class="reveal alert alert-danger">Choose an option!</div>'
              )
            );

            radiovalidate(1);
          } else {
            $("#step1 .option").removeClass("animate");
            $("#step1 .option").addClass("animateReverse");
            setTimeout(function () {
              next();
            }, 900);
            countresult(1);
          }
        });
        // check step2
        $("#step2btn").on("click", function () {
          radiovalidate(2);

          if (checkedradio == false) {
            (function (el) {
              setTimeout(function () {
                el.children().remove(".reveal");
              }, 3000);
            })(
              $("#error").append(
                '<div class="reveal alert alert-danger">Choose an option!</div>'
              )
            );

            radiovalidate(2);
          } else {
            $("#step2 .option").removeClass("animate");
            $("#step2 .option").addClass("animateReverse");
            setTimeout(function () {
              next();
            }, 900);
            countresult(2);
          }
        });
        // check step3
        $("#step3btn").on("click", function () {
          radiovalidate(3);

          if (checkedradio == false) {
            (function (el) {
              setTimeout(function () {
                el.children().remove(".reveal");
              }, 3000);
            })(
              $("#error").append(
                '<div class="reveal alert alert-danger">Choose an option!</div>'
              )
            );

            radiovalidate(3);
          } else {
            $("#step3 .option").removeClass("animate");
            $("#step3 .option").addClass("animateReverse");
            setTimeout(function () {
              next();
            }, 900);
            countresult(3);
          }
        });
        // check step4
        $("#sub").on("click", function () {
          radiovalidate(4);

          if (checkedradio == false) {
            (function (el) {
              setTimeout(function () {
                el.children().remove(".reveal");
              }, 3000);
            })(
              $("#error").append(
                '<div class="reveal alert alert-danger">Choose an option!</div>'
              )
            );

            radiovalidate(4);
          } else {
            countresult(4);

            showresult();
          }
        });
      });
    </script>
    <script type="module" src="./js/exam.js"></script>
  </body>
</html>
